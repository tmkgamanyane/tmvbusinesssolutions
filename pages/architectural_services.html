<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../styles/responsive-fixes.css">
    <script src="../scripts/mobile-responsive.js"></script>
</head>
<body>
    <header class="header">
    <div>
        <a href="https://www.tmvbusinesssolutions.co.za" target="_blank" rel="noopener noreferrer">
            <img src="../logos/TM Vanity Business Solutions Transparent Logo.png" alt="TMV Logo">
        </a>
    </div>
        
        <div id="companyName">TM Vanity Business Solutions</div>

        <div>
            <a href="client_login.html" id="loginButton">Login/Register</a>
        </div>
            <!-- Hamburger Menu Button -->
        <button class="hamburger" id="hamburgerMenu" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <nav id="navigationMenu">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="other.html">Other</a></li>
            <li>
                <a href="company_registration.html">Company Registration</a>
                <!--<ul>
                    <li><a href="new_company.html">New Company</a></li>
                    <li><a href="co_operative.html">Co-Operative</a></li>
                    <li><a href="security_company.html">Security Company</a></li>
                    <li><a href="personal_liability_company.html">Personal Liability Company</a></li>
                    <li><a href="holding_company.html">Holding Company</a></li>
                    <li><a href="ngo.html">NGO</a></li>
                    <li><a href="npo.html">NPO</a></li>
                    <li><a href="npc.html">NPC</a></li>
                </ul>-->
            </li>
            <li>
                <a href="structured_packages.html">Structured Packages</a>
                <!--<ul>
                    <li><a href="bronze_package.html">Bronze Package</a></li>
                    <li><a href="silver_package.html">Silver Package</a></li>
                    <li><a href="gold_package.html">Gold Package</a></li>
                    <li><a href="platinum_package.html">Platinum Package</a></li>
                    <li><a href="diamond_package.html">Diamond Package</a></li>
                </ul>-->
            </li>
        </li>
        <li>
            <a href="web_design.html">Web Design</a>
            <!--<ul>
                <li><a href="app_development.html">App Development</a></li>
                <li><a href="web_development.html">Web Development</a></li>
                <li><a href="e_commerce_development.html">E-Commerce Development</a></li>
            </ul>-->
        </li>
        <li>
            <a href="it_infrastructure.html">IT Infrastructure</a>                
        </li>
        <li>
            <a href="architectural_services.html">Architectural Services</a>
            <!--<ul>
                <li><a href="residential_plans.html">Residential Plans</a></li>
                <li><a href="commercial_plans.html">Commercial Plans</a></li>
            </ul>-->
        </li>
        <li>
            <a href="sars_services.html">SARS Services</a>
            <!--<ul>
                <li><a href="tax_registration.html">Tax Registration</a></li>
                <li><a href="vat_registration.html">Vat Registration</a></li>
                <li><a href="tax_vat_returns.html">Tax & Vat Returns</a></li>
                <li><a href="tax_vat_compliant.html">Tax & Vat Compliant</a></li>
                <li><a href="uif_paye_sdl_registration.html">UIF/PAYE/SDL Registration</a></li>
                <li><a href="import_export_license.html">Import & Export License</a></li>
                <li><a href="sars_representative.html">SARS Representative</a></li>
                <li><a href="custom_registration.html">Custom Registration</a></li>
            </ul>-->
        </li>
        <li>
            <a href="accounting_services.html">Accounting Services</a>                 
        </li>   
        <li>
            <a href="business_consulting.html">Business Consulting</a>
            <!--<ul>
                <li><a href="business_plans.html">Business Plans</a></li>
                <li><a href="business_profiles.html">Business Profiles</a></li>
                <li><a href="business_proposal.html">Business Proposal</a></li>
                <li><a href="market_research.html">Market Research</a></li>
                <li><a href="market_entry_analysis.html">Market Entry Analysis</a></li>
                <li><a href="advanced_business_consulting.html">Advanced Business Consulting</a></li>
                <li><a href="business_expansion_strategy.html">Business Expansion Strategy</a></li>
                <li><a href="competitor_analysis.html">Competitor Analysis</a></li>
                <li><a href="revenue_forecast.html">Revenue Forecast</a></li>
                <li><a href="growth_optimization.html">Growth Optimization</a></li>
                <li><a href="business_scaling_roadmap.html">Business Scaling Roadmap</a></li>
            </ul>-->
        </li>
        <li>
            <a href="branding_identity.html">Branding & Identity</a>
            <!--<ul>
                <li><a href="professional_logo_design.html">Professional Logo Design</a></li>
                <li><a href="business_card_design.html">Business Card Design</a></li>
                <li><a href="graphics_design.html">Graphics Design</a></li>
                <li><a href="digital_banners.html">Digital Banners</a></li>
                <li><a href="pull_up_banners.html">Pull Up Banners</a></li>
                <li><a href="flyers.html">Flyers</a></li>
                <li><a href="posters.html">Posters</a></li>
                <li><a href="backdrop.html">Backdrop</a></li>
                <li><a href="social_media_branding.html">Social Media Branding</a></li>
            </ul>-->
        </li>
        <li>
            <a href="marketing_services.html">Marketing Services</a>
            <!--<ul>
                <li><a href="google_ads_setup.html">Google Ads Setup</a></li>
                <li><a href="tik_tok_ads_setup.html">Tik Tok Ads Setup</a></li>
                <li><a href="facebook_ads_setup.html">Facebook Ads Setup</a></li>
                <li><a href="instagram_ads_setup.html">Instagram Ads Setup</a></li>
                <li><a href="x_twitter_ads_setup.html">X (Twitter) Ads Setup</a></li>
                <li><a href="emails_sms_marketing.html">Emails & SMS Marketing</a></li>
            </ul>-->
        </li>
        <li>
            <a href="social_media_growth.html">Social Media Growth</a>
            <!--<ul>
                <li><a href="facebook_followers_boosting.html">Facebook Followers Boosting</a></li>
                <li><a href="instagram_followers_boosting.html">Instagram Followers Boosting</a></li>
                <li><a href="x_twitter_followers_boosting.html">X (Twitter) Followers Boosting</a></li>
                <li><a href="social_media_management.html">Social Media Management</a></li>
            </ul>-->
        </li>
         <li>
                <a href="jobseeker_dashboard.html">Careers</a>                
        </li>   
    </ul>
</nav>

<div class="guestname">
    Welcome, Guest
</div><br>

<div class="architecture-container">
        <div class="architecture-header">
            <h1><i class="fas fa-drafting-compass"></i> Architectural Plans Application</h1>
            <p>Professional Civil Engineering & Architectural Services</p>
        </div>
        
        <div class="architecture-form">
            <form id="architecturalForm">
                <!-- Plan Type Selection -->
                <div class="architecture-plan-type-selector">
                    <button type="button" class="plan-type-btn active" data-type="residential">
                        <i class="fas fa-home"></i> Residential Plans
                    </button>
                    <button type="button" class="architecture-plan-type-btn" data-type="commercial">
                        <i class="fas fa-building"></i> Commercial Plans
                    </button>
                </div>
    
                <!-- Client Information -->
                <div class="architecture-section">
                    <h3><span class="architecture-section-icon"><i class="fas fa-user"></i></span>Client Information</h3>
                    <div class="form-grid">
                        <div class="architecture-form-group">
                            <label for="clientName">Full Name / Company Name <span class="architecture-required">*</span></label>
                            <input type="text" id="clientName" name="clientName" required>
                        </div>
                        <div class="architecture-form-group">
                            <label for="contactPerson">Contact Person (if company)</label>
                            <input type="text" id="contactPerson" name="contactPerson">
                        </div>
                        <div class="architecture-form-group">
                            <label for="email">Email Address <span class="architecture-required">*</span></label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="architecture-form-group">
                            <label for="phone">Phone Number <span class="architecture-required">*</span></label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        <div class="architecture-form-group full-width">
                            <label for="address">Property Address <span class="architecture-required">*</span></label>
                            <input type="text" id="address" name="address" required>
                        </div>
                    </div>
                </div>
    
                <!-- Project Details -->
                <div class="architecture-section">
                    <h3><span class="architecture-section-icon"><i class="fas fa-clipboard-list"></i></span>Project Details</h3>
                    <div class="architecture-form-grid">
                        <div class="architecture-form-group">
                            <label for="projectType">Project Type <span class="architecture-required">*</span></label>
                            <select id="projectType" name="projectType" required>
                                <option value="">Select Project Type</option>
                                <!-- Residential Options -->
                                <option value="new-construction" class="architecture-residential-option">New Construction</option>
                                <option value="renovation" class="architecture-residential-option">Renovation/Addition</option>
                                <option value="single-family" class="architecture-residential-option">Single Family Home</option>
                                <option value="duplex" class="architecture-residential-option">Duplex</option>
                                <option value="townhouse" class="architecture-residential-option">Townhouse</option>
                                <option value="apartment-complex" class="architecture-residential-option">Apartment Complex</option>
                                <!-- Commercial Options -->
                                <option value="office-building" class="architecture-commercial-option">Office Building</option>
                                <option value="retail-space" class="architecture-commercial-option">Retail Space</option>
                                <option value="warehouse" class="architecture-commercial-option">Warehouse/Industrial</option>
                                <option value="restaurant" class="architecture-commercial-option">Restaurant</option>
                                <option value="medical-facility" class="architecture-commercial-option">Medical Facility</option>
                                <option value="educational" class="architecture-commercial-option">Educational Facility</option>
                                <option value="mixed-use" class="architecture-commercial-option">Mixed-Use Development</option>
                            </select>
                        </div>
                        <div class="architecture-form-group">
                            <label for="totalArea">Total Floor Area (sq ft/sq m) <span class="architecture-required">*</span></label>
                            <input type="number" id="totalArea" name="totalArea" required>
                        </div>
                        <div class="architecture-form-group residential-only">
                            <label for="bedrooms">Number of Bedrooms</label>
                            <input type="number" id="bedrooms" name="bedrooms" min="0">
                        </div>
                        <div class="architecture-form-group residential-only">
                            <label for="bathrooms">Number of Bathrooms</label>
                            <input type="number" id="bathrooms" name="bathrooms" min="0" step="0.5">
                        </div>
                        <div class="architecture-form-group commercial-only">
                            <label for="occupancy">Expected Occupancy</label>
                            <input type="number" id="occupancy" name="occupancy" min="0">
                        </div>
                        <div class="architecture-form-group commercial-only">
                            <label for="parkingSpaces">Required Parking Spaces</label>
                            <input type="number" id="parkingSpaces" name="parkingSpaces" min="0">
                        </div>
                        <div class="architecture-form-group">
                            <label for="stories">Number of Stories <span class="architecture-required">*</span></label>
                            <input type="number" id="stories" name="stories" min="1" required>
                        </div>
                        <div class="architecture-form-group">
                            <label for="basement">Basement</label>
                            <select id="basement" name="basement">
                                <option value="none">No Basement</option>
                                <option value="partial">Partial Basement</option>
                                <option value="full">Full Basement</option>
                                <option value="walkout">Walkout Basement</option>
                            </select>
                        </div>
                    </div>
                </div>
    
                <!-- Site Information -->
                <div class="architecture-section">
                    <h3><span class="architecture-section-icon"><i class="fas fa-globe-americas"></i></span>Site Information</h3>
                    <div class="architecture-form-grid">
                        <div class="form-group-arhitecture">
                            <label for="lotSize">Lot Size (sq ft/sq m) <span class="architecture-required">*</span></label>
                            <input type="number" id="lotSize" name="lotSize" required>
                        </div>
                        <div class="architecture-form-group">
                            <label for="zoning">Zoning Classification</label>
                            <input type="text" id="zoning" name="zoning" placeholder="e.g., R-1, C-2, M-1">
                        </div>
                        <div class="architecture-form-group">
                            <label for="setbacks">Required Setbacks (ft/m)</label>
                            <input type="text" id="setbacks" name="setbacks" placeholder="Front: 25ft, Rear: 20ft, Side: 10ft">
                        </div>
                        <div class="architecture-form-group">
                            <label for="utilities">Available Utilities</label>
                            <div class="architecture-checkbox-group">
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="water" name="utilities" value="water">
                                    <label for="water">Water</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="sewer" name="utilities" value="sewer">
                                    <label for="sewer">Sewer</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="electric" name="utilities" value="electric">
                                    <label for="electric">Electricity</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="gas" name="utilities" value="gas">
                                    <label for="gas">Natural Gas</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                <!-- Technical Requirements -->
                <div class="architecture-section">
                    <h3><span class="architecture-section-icon"><i class="fas fa-cogs"></i></span>Technical Requirements</h3>
                    <div class="architecture-form-grid">
                        <div class="architecture-form-group">
                            <label for="structuralSystem">Structural System <span class="architecture-required">*</span></label>
                            <select id="structuralSystem" name="structuralSystem" required>
                                <option value="">Select Structural System</option>
                                <option value="wood-frame">Wood Frame</option>
                                <option value="steel-frame">Steel Frame</option>
                                <option value="concrete-block">Concrete Block</option>
                                <option value="reinforced-concrete">Reinforced Concrete</option>
                                <option value="post-tension">Post-Tension Concrete</option>
                                <option value="hybrid">Hybrid System</option>
                            </select>
                        </div>
                        <div class="architecture-form-group">
                            <label for="foundation">Foundation Type <span class="architecture-required">*</span></label>
                            <select id="foundation" name="foundation" required>
                                <option value="">Select Foundation Type</option>
                                <option value="slab-on-grade">Slab on Grade</option>
                                <option value="crawl-space">Crawl Space</option>
                                <option value="full-basement">Full Basement</option>
                                <option value="pile-foundation">Pile Foundation</option>
                                <option value="spread-footing">Spread Footing</option>
                            </select>
                        </div>
                        <div class="architecture-form-group">
                            <label for="hvacSystem">HVAC System</label>
                            <select id="hvacSystem" name="hvacSystem">
                                <option value="">Select HVAC System</option>
                                <option value="central-air">Central Air & Heat</option>
                                <option value="heat-pump">Heat Pump</option>
                                <option value="mini-split">Mini-Split System</option>
                                <option value="radiant">Radiant Heating</option>
                                <option value="commercial-rooftop">Commercial Rooftop Unit</option>
                                <option value="vrf">Variable Refrigerant Flow (VRF)</option>
                            </select>
                        </div>
                        <div class="architecture-form-group">
                            <label for="roofSystem">Roof System</label>
                            <select id="roofSystem" name="roofSystem">
                                <option value="">Select Roof System</option>
                                <option value="gable">Gable Roof</option>
                                <option value="hip">Hip Roof</option>
                                <option value="flat">Flat Roof</option>
                                <option value="shed">Shed Roof</option>
                                <option value="mansard">Mansard Roof</option>
                                <option value="green-roof">Green Roof</option>
                            </select>
                        </div>
                    </div>
                </div>
    
                <!-- Services Required -->
                <div class="architecture-section">
                    <h3><span class="architecture-section-icon"><i class="fas fa-tools"></i></span>Services Required</h3>
                    <div class="architecture-form-grid">
                        <div class="architecture-form-group full-width">
                            <label for="servicesNeeded">Services Needed <span class="architecture-required">*</span></label>
                            <div class="architecture-checkbox-group">
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="architectural-plans" name="servicesNeeded" value="architectural-plans" checked>
                                    <label for="architectural-plans">Architectural Plans</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="structural-engineering" name="servicesNeeded" value="structural-engineering">
                                    <label for="structural-engineering">Structural Engineering</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="electrical-plans" name="servicesNeeded" value="electrical-plans">
                                    <label for="electrical-plans">Electrical Plans</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="plumbing-plans" name="servicesNeeded" value="plumbing-plans">
                                    <label for="plumbing-plans">Plumbing Plans</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="hvac-plans" name="servicesNeeded" value="hvac-plans">
                                    <label for="hvac-plans">HVAC Plans</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="site-plan" name="servicesNeeded" value="site-plan">
                                    <label for="site-plan">Site Plan</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="permit-assistance" name="servicesNeeded" value="permit-assistance">
                                    <label for="permit-assistance">Permit Assistance</label>
                                </div>
                                <div class="architecture-checkbox-item">
                                    <input type="checkbox" id="construction-documents" name="servicesNeeded" value="construction-documents">
                                    <label for="construction-documents">Construction Documents</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                <!-- Timeline & Budget -->
                <div class="architecture-section">
                    <h3><span class="architecture-section-icon"><i class="fas fa-clock"></i></span>Timeline & Budget</h3>
                    <div class="architecture-form-grid">
                        <div class="architecture-form-group">
                            <label for="timeline">Desired Completion Date</label>
                            <input type="date" id="timeline" name="timeline">
                        </div>
                        <div class="architecture-form-group">
                            <label for="urgency">Project Urgency</label>
                            <select id="urgency" name="urgency">
                                <option value="standard">Standard (4-8 weeks)</option>
                                <option value="expedited">Expedited (2-4 weeks)</option>
                                <option value="rush">Rush (1-2 weeks)</option>
                            </select>
                        </div>
                        <div class="architecture-form-group">
                            <label for="budget">Estimated Budget Range</label>
                            <select id="budget" name="budget">
                                <option value="">Select Budget Range</option>
                                <option value="under-5k">Under R5,000</option>
                                <option value="5k-10k">R5,000 - R10,000</option>
                                <option value="10k-25k">R10,000 - R25,000</option>
                                <option value="25k-50k">R25,000 - R50,000</option>
                                <option value="50k-100k">R50,000 - R100,000</option>
                                <option value="over-100k">Over R100,000</option>
                            </select>
                        </div>
                        <div class="architecture-form-group">
                            <label for="constructionBudget">Total Construction Budget (if known)</label>
                            <input type="number" id="constructionBudget" name="constructionBudget" placeholder="R Amount">
                        </div>
                    </div>
                </div>
    
                <!-- Additional Information -->
                <div class="architecture-section">
                    <h3><span class="architecture-section-icon"><i class="fas fa-file-alt"></i></span>Additional Information</h3>
                    <div class="architecture-form-grid">
                        <div class="architecture-form-group full-width">
                            <label for="existingPlans">Existing Plans Available</label>
                            <select id="existingPlans" name="existingPlans">
                                <option value="none">No Existing Plans</option>
                                <option value="sketches">Rough Sketches Only</option>
                                <option value="partial">Partial Plans</option>
                                <option value="complete">Complete Set (Needs Updates)</option>
                                <option value="survey">Survey Only</option>
                            </select>
                        </div>
                        <div class="architecture-form-group full-width">
                            <label for="specialRequirements">Special Requirements or Challenges</label>
                            <textarea id="specialRequirements" name="specialRequirements" placeholder="Please describe any special requirements, site challenges, design preferences, or other important details..."></textarea>
                        </div>
                        <div class="architecture-form-group full-width">
                            <label for="designPreferences">Design Preferences & Style</label>
                            <textarea id="designPreferences" name="designPreferences" placeholder="Describe your preferred architectural style, layout preferences, specific features desired, etc..."></textarea>
                        </div>
                    </div>
                </div>
    
                <div class="architecture-submit-section">
                    <button type="submit" class="architecture-submit-btn">Submit Application</button>
                    <p style="color: #000; margin-top: 15px; opacity: 0.9;">
                        Our team will review your application and contact you within 1-2 business days.
                    </p>
                </div>
            </form>
        </div>          
    </div>
    

    <footer>
        <div class="section">
            <h4>Contact</h4>
            <p>Tel: 087 123 4567</p>
            <p>Cell: 081 253 7967</p>
            <p>Email: <a href="mailto:sales@tmvbusinesssolutions.co.za">sales@tmvbusinesssolutions.co.za</a></p>
            <p>Email: <a href="mailto:info@tmvbusinesssolutions.co.za">info@tmvbusinesssolutions.co.za</a></p>
        </div>
        <div class="section">
            <h4>Address</h4>
            <p>186 Frikkie De Beer Street</p>
            <p>Menlyn Place</p>
            <p>Menlyn</p>
            <p>0063</p>
        </div>
        <div class="section">
            <h4>Important Links</h4>
            <p><a href="legal.html">Legal</a></p>
            <p><a href="https://popia.co.za/" target="_blank" rel="noopener noreferrer">POPIA Act</a></p>
            <p><a href="https://www.cipc.co.za/" target="_blank" rel="noopener noreferrer">CIPC</a></p>
            <p><a href="https://www.sars.gov.za/" target="_blank" rel="noopener noreferrer">SARS</a></p>
        </div>
        <div class="section">
            <h4>Social Media</h4>
            <p><a href="https://www.facebook.com/profile.php?id=61570883496340" target="_blank" rel="noopener noreferrer">Facebook</a></p>
            <p><a href="https://x.com/tmvbizsolutions" target="_blank" rel="noopener noreferrer">Twitter</a></p>
            <p><a href="#">Instagram</a></p>
        </div>
        <div class="section">
            <h4>Subscribe</h4>
            <form class="subscribe-form">
                <input type="text" placeholder="Name">
                <input type="text" placeholder="Last Name">
                <input type="email" placeholder="Email">
                <input type="text" placeholder="Contact No.">
                <button type="submit">Subscribe</button>
            </form>
        </div>
    </footer>

    <script src="../scripts/api.js" defer></script>
    <script src="../scripts/auth.js" defer></script>
    <script src="../scripts/login.js" defer></script>
    <script src="../scripts/auth-check.js"></script>

    <script>
       // Form state management
        let currentPlanType = 'residential';
        const formData = {};

        // Initialize form
        document.addEventListener('DOMContentLoaded', function() {
            initializePlanTypeSelector();
            initializeFormValidation();
            initializeConditionalFields();
            initializeFormSaving();
            setupEventListeners();
            updateProjectTypeOptions();
            toggleSections();
        });

        // Plan type selector functionality
        function initializePlanTypeSelector() {
            const buttons = document.querySelectorAll('.architecture-plan-type-btn');
            
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    buttons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update current plan type
                    currentPlanType = this.getAttribute('data-type');
                    
                    // Show/hide relevant sections
                    toggleSections();
                    
                    // Update project type options
                    updateProjectTypeOptions();
                    
                    // Clear form data for switched type
                    clearTypeSpecificData();
                });
            });
        }

        // Toggle sections based on plan type
        function toggleSections() {
            const residentialSections = document.querySelectorAll('.residential-only');
            const commercialSections = document.querySelectorAll('.commercial-only');
            
            if (currentPlanType === 'residential') {
                residentialSections.forEach(section => {
                    section.style.display = 'block';
                });
                commercialSections.forEach(section => {
                    section.style.display = 'none';
                });
            } else {
                commercialSections.forEach(section => {
                    section.style.display = 'block';
                });
                residentialSections.forEach(section => {
                    section.style.display = 'none';
                });
            }
        }

        // Update project type dropdown options
        function updateProjectTypeOptions() {
            const projectTypeSelect = document.getElementById('projectType');
            const residentialOptions = projectTypeSelect.querySelectorAll('.residential-option');
            const commercialOptions = projectTypeSelect.querySelectorAll('.commercial-option');
            
            // Reset selection
            projectTypeSelect.value = '';
            
            if (currentPlanType === 'residential') {
                residentialOptions.forEach(option => option.style.display = 'block');
                commercialOptions.forEach(option => option.style.display = 'none');
            } else {
                commercialOptions.forEach(option => option.style.display = 'block');
                residentialOptions.forEach(option => option.style.display = 'none');
            }
        }

        // Clear type-specific form data when switching
        function clearTypeSpecificData() {
            const form = document.getElementById('architecturalForm');
            const typeSpecificFields = form.querySelectorAll('.residential-only input, .residential-only select, .residential-only textarea, .commercial-only input, .commercial-only select, .commercial-only textarea');
            
            typeSpecificFields.forEach(field => {
                if (field.type === 'checkbox') {
                    field.checked = false;
                } else {
                    field.value = '';
                }
            });
        }

        // Form validation
        function initializeFormValidation() {
            const form = document.getElementById('architecturalForm');
            const requiredFields = form.querySelectorAll('[required]');
            
            // Real-time validation
            requiredFields.forEach(field => {
                field.addEventListener('blur', function() {
                    validateField(this);
                });
                
                field.addEventListener('input', function() {
                    if (this.classList.contains('error')) {
                        validateField(this);
                    }
                });
            });
        }

        // Validate individual field
        function validateField(field) {
            const fieldContainer = field.parentElement;
            let errorMessage = fieldContainer.querySelector('.error-message');
            
            // Remove existing error message
            if (errorMessage) {
                errorMessage.remove();
            }
            
            field.classList.remove('error');
            
            if (field.hasAttribute('required') && !field.value.trim()) {
                showFieldError(field, 'This field is required');
                return false;
            }
            
            // Email validation
            if (field.type === 'email' && field.value) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(field.value)) {
                    showFieldError(field, 'Please enter a valid email address');
                    return false;
                }
            }
            
            // Phone validation
            if (field.type === 'tel' && field.value) {
                const phoneRegex = /^[\+]?[0-9][\d]{0,15}$/;
                if (!phoneRegex.test(field.value.replace(/[\s\-\(\)]/g, ''))) {
                    showFieldError(field, 'Please enter a valid phone number');
                    return false;
                }
            }
            
            // Number validation
            if (field.type === 'number' && field.value) {
                if (field.hasAttribute('min') && parseFloat(field.value) < parseFloat(field.getAttribute('min'))) {
                    showFieldError(field, `Value must be at least ${field.getAttribute('min')}`);
                    return false;
                }
            }
            
            return true;
        }

        // Show field error
        function showFieldError(field, message) {
            field.classList.add('error');
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            
            field.parentElement.appendChild(errorDiv);
        }

        // Conditional fields logic
        function initializeConditionalFields() {
            // Project type affects requirements
            const projectTypeField = document.getElementById('projectType');
            if (projectTypeField) {
                projectTypeField.addEventListener('change', function() {
                    updateConditionalRequirements();
                });
            }
            
            // Stories affects elevator requirements
            const storiesField = document.getElementById('stories');
            if (storiesField) {
                storiesField.addEventListener('input', function() {
                    updateElevatorRequirements();
                });
            }
        }

        // Update conditional requirements
        function updateConditionalRequirements() {
            const projectType = document.getElementById('projectType').value;
            
            // Update fire rating requirements
            const fireRatingField = document.getElementById('fireRating');
            if (fireRatingField && currentPlanType === 'commercial') {
                if (projectType.includes('restaurant')) {
                    // Suggest appropriate fire rating for restaurants
                    fireRatingField.style.backgroundColor = '#fff3cd';
                }
            }
        }

        // Update elevator requirements based on stories
        function updateElevatorRequirements() {
            const stories = parseInt(document.getElementById('stories').value) || 0;
            
            if (currentPlanType === 'commercial' && stories > 2) {
                // In a real implementation, you might show a message about elevator requirements
            }
        }

        // Form data saving (in memory)
        function initializeFormSaving() {
            const form = document.getElementById('architecturalForm');
            const formElements = form.querySelectorAll('input, select, textarea');
            
            formElements.forEach(element => {
                element.addEventListener('change', function() {
                    saveFormData();
                });
            });
        }

        // Save form data to memory
        function saveFormData() {
            const form = document.getElementById('architecturalForm');
            const formData = new FormData(form);
            
            // Store in memory object
            for (let [key, value] of formData.entries()) {
                window.architecturalFormData = window.architecturalFormData || {};
                
                // Handle multiple values (checkboxes)
                if (window.architecturalFormData[key]) {
                    if (Array.isArray(window.architecturalFormData[key])) {
                        window.architecturalFormData[key].push(value);
                    } else {
                        window.architecturalFormData[key] = [window.architecturalFormData[key], value];
                    }
                } else {
                    window.architecturalFormData[key] = value;
                }
            }
            
            // Save plan type
            window.architecturalFormData.planType = currentPlanType;
        }

        // Setup additional event listeners
        function setupEventListeners() {
            // Form submission
            const form = document.getElementById('architecturalForm');
            form.addEventListener('submit', handleFormSubmission);
            
            // Auto-save on input
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', debounce(saveFormData, 1000));
            });
            
            // Calculate estimated area based on rooms (residential)
            const bedroomsField = document.getElementById('bedrooms');
            const bathroomsField = document.getElementById('bathrooms');
            
            if (bedroomsField && bathroomsField) {
                bedroomsField.addEventListener('input', calculateEstimatedArea);
                bathroomsField.addEventListener('input', calculateEstimatedArea);
            }
        }

        // Calculate estimated area for residential
        function calculateEstimatedArea() {
            if (currentPlanType !== 'residential') return;
            
            const bedrooms = parseInt(document.getElementById('bedrooms').value) || 0;
            const bathrooms = parseFloat(document.getElementById('bathrooms').value) || 0;
            const totalAreaField = document.getElementById('totalArea');
            
            if (bedrooms > 0 && !totalAreaField.value) {
                // Rough estimation: 150 sq ft per bedroom + 40 sq ft per bathroom + 800 common area
                const estimatedArea = (bedrooms * 150) + (bathrooms * 40) + 800;
                totalAreaField.placeholder = `Estimated: ~${estimatedArea} sq ft`;
                totalAreaField.style.backgroundColor = '#f8f9fa';
            }
        }

        // Handle form submission
        async function handleFormSubmission(e) {
            e.preventDefault();
            
            // Validate required fields
            const form = document.getElementById('architecturalForm');
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!validateField(field)) {
                    isValid = false;
                }
            });
            
            // Validate at least one service is selected
            const servicesSelected = form.querySelectorAll('input[name="servicesNeeded"]:checked');
            if (servicesSelected.length === 0) {
                showNotification('Please select at least one service needed.', 'error');
                isValid = false;
            }
            
            if (!isValid) {
                // Scroll to first error
                const firstError = form.querySelector('.error');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }
            
            // Save final form data
            saveFormData();
            
            // Disable submit button during request
            const submitBtn = document.querySelector('.architecture-submit-btn');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting Application...';
            
            // Show loading notification
            showNotification('Submitting architectural plans application...', 'info');
            
            try {
                // Prepare form data for submission
                const formData = new FormData(form);
                const submitData = {};
                
                // Convert FormData to object, handling multiple values (checkboxes)
                for (let [key, value] of formData.entries()) {
                    if (submitData[key]) {
                        if (Array.isArray(submitData[key])) {
                            submitData[key].push(value);
                        } else {
                            submitData[key] = [submitData[key], value];
                        }
                    } else {
                        submitData[key] = value;
                    }
                }
                
                // Add plan type
                submitData.planType = currentPlanType;
                
                // Get selected services
                const selectedServices = Array.from(servicesSelected).map(checkbox => checkbox.value);
                
                // Prepare consultation request
                const consultationData = {
                    firstName: submitData.clientName ? submitData.clientName.split(' ')[0] : '',
                    lastName: submitData.clientName ? (submitData.clientName.split(' ').slice(1).join(' ') || 'N/A') : 'N/A',
                    email: submitData.email,
                    cellNo: submitData.phone,
                    description: `Architectural Plans Application

Plan Type: ${currentPlanType.charAt(0).toUpperCase() + currentPlanType.slice(1)}
Project Type: ${submitData.projectType || 'Not specified'}
Total Area: ${submitData.totalArea || 'Not specified'} sq ft/sq m
Stories: ${submitData.stories || 'Not specified'}
Property Address: ${submitData.address || 'Not specified'}

Services Needed: ${selectedServices.join(', ')}

Structural System: ${submitData.structuralSystem || 'Not specified'}
Foundation Type: ${submitData.foundation || 'Not specified'}
Budget Range: ${submitData.budget || 'Not specified'}
Timeline: ${submitData.timeline || 'Not specified'}
Urgency: ${submitData.urgency || 'Standard'}

Special Requirements:
${submitData.specialRequirements || 'None specified'}

Design Preferences:
${submitData.designPreferences || 'None specified'}

Contact Information:
- Contact Person: ${submitData.contactPerson || 'Not specified'}
- Phone: ${submitData.phone}
- Email: ${submitData.email}

Site Information:
- Lot Size: ${submitData.lotSize || 'Not specified'} sq ft/sq m
- Zoning: ${submitData.zoning || 'Not specified'}
- Setbacks: ${submitData.setbacks || 'Not specified'}
- Utilities: ${submitData.utilities ? (Array.isArray(submitData.utilities) ? submitData.utilities.join(', ') : submitData.utilities) : 'Not specified'}

Technical Details:
- HVAC System: ${submitData.hvacSystem || 'Not specified'}
- Roof System: ${submitData.roofSystem || 'Not specified'}
- Basement: ${submitData.basement || 'None'}
- Construction Budget: ${submitData.constructionBudget ? 'R' + submitData.constructionBudget : 'Not specified'}
- Existing Plans: ${submitData.existingPlans || 'None'}`
                };
                
                // Debug: Log the consultation data being sent
                console.log('Sending consultation data:', consultationData);
                
                // Build API URL dynamically to work with www and non-www
                const apiBaseUrl = window.location.hostname.includes('localhost') || window.location.hostname.includes('127.0.0.1')
                    ? 'http://localhost:3000'
                    : `${window.location.protocol}//${window.location.hostname}`;
                
                // Submit to Architecture consultation endpoint
                const response = await fetch(`${apiBaseUrl}/api/consultation/architecture`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                    body: JSON.stringify(consultationData)
                });

                const result = await response.json();
                console.log('Architecture consultation response:', result);

                if (response.ok) {
                    // Show success message
                    showSubmissionSuccess();
                    console.log('Architectural plans application submitted successfully!', result);
                } else {
                    console.error('Server returned error:', {
                        status: response.status,
                        statusText: response.statusText,
                        result: result
                    });
                    throw new Error(result.message || 'Failed to submit application');
                }
                
            } catch (error) {
                console.error('Error submitting application:', error);
                console.error('Consultation data that was sent:', consultationData);
                
                // Show more detailed error message
                let errorMessage = 'Failed to submit application. Please try again.';
                if (error.message && error.message !== 'Failed to submit application') {
                    errorMessage = `Error: ${error.message}`;
                }
                
                showNotification(errorMessage, 'error');
                
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        }

        // Show notification
        function showNotification(message, type) {
            // Create notification element if it doesn't exist
            let notification = document.getElementById('form-notification');
            if (!notification) {
                notification = document.createElement('div');
                notification.id = 'form-notification';
                notification.style.position = 'fixed';
                notification.style.top = '20px';
                notification.style.right = '20px';
                notification.style.padding = '15px 20px';
                notification.style.borderRadius = '6px';
                notification.style.color = 'white';
                notification.style.fontWeight = '500';
                notification.style.zIndex = '1000';
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                notification.style.transition = 'opacity 0.3s, transform 0.3s';
                notification.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
                notification.style.maxWidth = '350px';
                notification.style.wordWrap = 'break-word';
                document.body.appendChild(notification);
            }
            
            // Set notification content and style
            notification.textContent = message;
            
            // Set background color based on type
            switch(type) {
                case 'error':
                    notification.style.backgroundColor = '#e74c3c';
                    break;
                case 'success':
                    notification.style.backgroundColor = '#27ae60';
                    break;
                case 'info':
                    notification.style.backgroundColor = '#3498db';
                    break;
                default:
                    notification.style.backgroundColor = '#27ae60';
            }
            
            notification.style.opacity = '1';
            notification.style.transform = 'translateY(0)';
            
            // Hide notification after 4 seconds for longer messages
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
            }, type === 'info' ? 4000 : 3000);
        }

        // Show submission success
        function showSubmissionSuccess() {
            const submitSection = document.querySelector('.architecture-submit-section');
            const originalContent = submitSection.innerHTML;
            
            submitSection.innerHTML = `
                <div style="text-align: center; color: #2c3e50;">
                    <div style="font-size: 3em; margin-bottom: 15px;"></div>
                    <h2 style="margin-bottom: 10px;">Application Submitted Successfully!</h2>
                    <p style="opacity: 0.9; margin-bottom: 20px;">
                        Thank you for your submission. Our team will review your architectural plans request and contact you within 1-2 business days.
                    </p>
                    <p style="font-size: 0.9em; opacity: 0.8;">
                        Reference ID: APF-${Date.now().toString().substr(-6)}
                    </p>
                </div>
            `;
            
            // Scroll to success message
            submitSection.scrollIntoView({ behavior: 'smooth' });
            
            // Reset form after 5 seconds (optional)
            setTimeout(() => {
                if (confirm('Would you like to submit another application?')) {
                    submitSection.innerHTML = originalContent;
                    document.getElementById('architecturalForm').reset();
                    window.architecturalFormData = {};
                    // Re-initialize
                    setupEventListeners();
                    toggleSections();
                    updateProjectTypeOptions();
                }
            }, 5000);
        }

        // Utility function: Debounce
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Print form data function (for debugging)
        window.printFormData = function() {
            console.log('Current Form Data:', window.architecturalFormData);
        };

        // Export form data as JSON (utility function)
        window.exportFormData = function() {
            const dataStr = JSON.stringify(window.architecturalFormData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `architectural-plans-application-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        };


    </script>
</body>
</html>
